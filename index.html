<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Name This Athlete</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-900 bg-gradient-to-b from-gray-800 to-gray-900 flex items-center justify-center min-h-screen font-montserrat">
  <div id="gameContainer" class="bg-gray-800 p-6 rounded-xl shadow-2xl w-full max-w-md border border-blue-600">
    <h1 class="text-3xl font-bold text-center text-white mb-4">Name This Athlete</h1>
    <p class="text-center text-blue-400 mb-2 text-lg">Level: <span id="currentLevel">1</span>/10</p>
    <div class="relative w-full h-72 mb-4 rounded-lg overflow-hidden border-2 border-blue-500">
      <img id="playerImage" src="" alt="Athlete" class="w-full h-full object-cover">
      <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
    </div>
    <p id="imageError" class="text-center mb-4 text-red-500 hidden">Image failed to load. Keep guessing!</p>
    <input id="guessInput" type="text" placeholder="Who's this athlete?" class="w-full p-3 bg-gray-700 text-white border border-blue-500 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-blue-600" autocomplete="off">
    <button id="submitAnswer" class="w-full bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 transform hover:scale-105 transition duration-200 font-bold mb-2">Submit Answer</button>
    <button id="nextLevel" class="w-full bg-green-600 text-white p-3 rounded-lg hover:bg-green-700 transform hover:scale-105 transition duration-200 font-bold hidden">Next Level</button>
    <button id="playAgain" class="w-full bg-red-600 text-white p-3 rounded-lg hover:bg-red-700 transform hover:scale-105 transition duration-200 font-bold hidden">Play Again</button>
    <p id="feedback" class="text-center mt-4 text-xl font-bold animate-fade-in"></p>
    <p id="score" class="text-center mt-2 text-white">Score: <span id="scoreValue">0</span>/50</p>
    <p id="shareLink" class="text-center mt-4 hidden text-white">Share your results: <a id="shareUrl" href="#" class="text-blue-400 underline"></a></p>
  </div>

  <script>
    // Daily players data (updated with new players and image URLs)
    const dailyPlayers = [
      { name: "Ronnie Brown", image: "https://www.palmbeachpost.com/gcdn/authoring/2011/08/02/NPPP/ghows-LK-ca4b210c-52c0-4d1f-833d-9d83c158640c-2a688650.jpeg?width=660&height=372&fit=crop&format=pjpg&auto=webp" },
      { name: "Amani Toomer", image: "https://nypost.com/wp-content/uploads/sites/2/2020/05/amani-toomer-1.jpg?quality=75&strip=all" },
      { name: "Carlos Delgado", image: "https://i.ytimg.com/vi/z-exh9UI6hs/maxresdefault.jpg" },
      { name: "Jason Terry", image: "https://www.jsonline.com/gcdn/-mm-/f04d3c181ab2d4e272b82b72ec90a93d2c77309e/c=0-0-2518-1423/local/-/media/2017/11/29/WIGroup/Milwaukee/636475795683891245-USATSI-10445780.jpg" },
      { name: "Duane Brown", image: "https://cdn.vox-cdn.com/thumbor/WBT--85z1RHLsDchaqirfSCVky4=/0x152:2752x1987/1400x1400/filters:focal(0x152:2752x1987):format(jpeg)/cdn.vox-cdn.com/uploads/chorus_image/image/26633431/duanebrown_p_usatsi_7518251.0.jpg" },
      { name: "Jason Seahorn", image: "https://images2.minutemediacdn.com/image/upload/c_crop,w_2700,h_1518,x_0,y_509/c_fill,w_720,ar_16:9,f_auto,q_auto,g_auto/images/ImagnImages/mmsport/giants_country/01js5jjpb62adxyp98gp.jpg" },
      { name: "Bernie Williams", image: "https://cdn.vox-cdn.com/thumbor/TTZvHxjME3oDQVWThqb90DgDxTY=/0x0:2700x3900/1200x800/filters:focal(1070x1047:1502x1479)/cdn.vox-cdn.com/uploads/chorus_image/image/73084358/usa_today_5453276.0.jpg" },
      { name: "Rickie Weeks", image: "https://nbcsports.brightspotcdn.com/dims4/default/dc30def/2147483647/strip/true/crop/1023x576+0+0/resize/1000x563!/quality/90/?url=https%3A%2F%2Fnbc-sports-production-nbc-sports.s3.us-east-1.amazonaws.com%2Fbrightspot%2F3b%2F31%2F07482663477c37cf92ef3b437622%2Fweeks-brewers.jpg" },
      { name: "Ickey Woods", image: "https://fresnoahof.org/wp-content/uploads/2023/09/Untitled-design-2023-09-11T121000.477-1024x1024.png" },
      { name: "Jay Bruce", image: "https://cdn.fansided.com/wp-content/blogs.dir/3/files/2016/12/9590527-jay-bruce-mlb-new-york-mets-philadelphia-phillies-1-850x560.jpg" }
    ];

    let currentLevel = 1;
    let score = 0;
    let incorrectAthletes = [];

    // DOM elements
    const gameContainer = document.getElementById('gameContainer');
    const playerImage = document.getElementById('playerImage');
    const imageError = document.getElementById('imageError');
    const guessInput = document.getElementById('guessInput');
    const submitAnswer = document.getElementById('submitAnswer');
    const nextLevel = document.getElementById('nextLevel');
    const playAgain = document.getElementById('playAgain');
    const feedback = document.getElementById('feedback');
    const scoreDisplay = document.getElementById('scoreValue');
    const currentLevelDisplay = document.getElementById('currentLevel');
    const shareLink = document.getElementById('shareLink');
    const shareUrl = document.getElementById('shareUrl');

    // Handle image load errors
    playerImage.onerror = () => {
      imageError.classList.remove('hidden');
      submitAnswer.classList.remove('hidden');
      nextLevel.classList.add('hidden');
    };

    playerImage.onload = () => {
      imageError.classList.add('hidden');
      submitAnswer.classList.remove('hidden');
      nextLevel.classList.add('hidden');
    };

    // Generate shareable link
    function generateShareLink(score, incorrectAthletes) {
      const baseUrl = window.location.href.split('?')[0];
      const incorrectParam = incorrectAthletes.map(name => encodeURIComponent(name)).join(',');
      return `${baseUrl}?score=${score}&incorrect=${incorrectParam}`;
    }

    // Display results from URL query params
    function displayResultsFromUrl() {
      const urlParams = new URLSearchParams(window.location.search);
      const score = urlParams.get('score');
      const incorrect = urlParams.get('incorrect');
      if (score !== null) {
        let incorrectMessage = "I knew all the athletes! üèÜ";
        if (incorrect) {
          const incorrectList = incorrect.split(',').map(name => decodeURIComponent(name)).join(', ');
          incorrectMessage = `I did not know ${incorrectList}.`;
        }
        gameContainer.innerHTML = `
          <h1 class="text-3xl font-bold text-center text-white mb-4">Game Results</h1>
          <p class="text-center mb-4 text-blue-400 text-xl">Score: ${score}/50 üèà</p>
          <p class="text-center mb-4 text-white">${incorrectMessage}</p>
          <p class="text-center"><a href="${window.location.href.split('?')[0]}" class="text-blue-400 underline text-lg">Play again! üèÄ</a></p>
        `;
      }
    }

    // Load current level
    function loadLevel() {
      playerImage.src = dailyPlayers[currentLevel - 1].image;
      guessInput.value = '';
      feedback.textContent = '';
      submitAnswer.classList.remove('hidden');
      guessInput.classList.remove('hidden');
      nextLevel.classList.add('hidden');
      playAgain.classList.add('hidden');
      imageError.classList.add('hidden');
      scoreDisplay.textContent = score;
      currentLevelDisplay.textContent = currentLevel;
      shareLink.classList.add('hidden');
    }

    // Move to next level
    function moveToNextLevel() {
      currentLevel++;
      if (currentLevel <= dailyPlayers.length) {
        loadLevel();
      } else {
        feedback.textContent = `Game Over! Your Score: ${score}/50 üèÜ`;
        feedback.classList.remove('text-red-500', 'text-green-500');
        feedback.classList.add('text-blue-400');
        submitAnswer.classList.add('hidden');
        guessInput.classList.add('hidden');
        nextLevel.classList.add('hidden');
        playAgain.classList.remove('hidden');
        const shareUrlLink = generateShareLink(score, incorrectAthletes);
        shareUrl.href = shareUrlLink;
        shareUrl.textContent = `üèà My Score: ${score}/50 ${incorrectAthletes.length ? '| Missed: ' + incorrectAthletes.join(', ') : '| Nailed all athletes!'}`;
        shareLink.classList.remove('hidden');
      }
    }

    // Check answer
    submitAnswer.addEventListener('click', () => {
      const guess = guessInput.value.trim().toLowerCase();
      const correctName = dailyPlayers[currentLevel - 1].name.toLowerCase();

      feedback.classList.remove('text-red-500', 'text-green-500');
      if (guess === correctName) {
        score += 5;
        feedback.textContent = `Nailed it! +5 points! üèÄ`;
        feedback.classList.add('text-green-500');
      } else {
        incorrectAthletes.push(dailyPlayers[currentLevel - 1].name);
        feedback.textContent = `Swing and a miss! It was ${dailyPlayers[currentLevel - 1].name}.`;
        feedback.classList.add('text-red-500');
      }
      scoreDisplay.textContent = score;
      submitAnswer.classList.add('hidden');
      guessInput.classList.add('hidden');
      nextLevel.classList.remove('hidden');
    });

    // Next level button
    nextLevel.addEventListener('click', () => {
      moveToNextLevel();
    });

    // Play again button
    playAgain.addEventListener('click', () => {
      currentLevel = 1;
      score = 0;
      incorrectAthletes = [];
      loadLevel();
    });

    // Check for shared results on load
    displayResultsFromUrl();

    // Initialize game
    loadLevel();
  </script>

  <style>
    @keyframes fade-in {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in {
      animation: fade-in 0.3s ease-out;
    }
    .font-montserrat {
      font-family: 'Montserrat', sans-serif;
    }
  </style>
</body>
</html>
